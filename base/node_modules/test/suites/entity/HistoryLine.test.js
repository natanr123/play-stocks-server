"use strict";
import AlphaVantageService from 'app/service/AlphaVantageService';
import AlphaVantageServiceStub from 'test/stubs/AlphaVantageServiceStub';

import StocksSymbols from 'app/service/StocksSymbols';

import MarketTime from 'app/entity/MarketTime'
import assert from 'assert'
import StocksHistory from 'app/repository/StocksHistory'
import sinon from 'sinon';
import AlphaStocksManager from 'app/stocks/AlphaStocksManager';
import HistoryLine from 'app/entity/HistoryLine';


process.on('unhandledRejection', error => {
    // Won't execute
    console.log('unhandledRejection22222', error);
});

//
describe('HistoryLine', function() {
    AlphaVantageServiceStub.start();
    this.timeout(2000);


    it('isWithinTimeRange', ()=>
    {
        let h = new HistoryLine(100,5,StocksSymbols.MSFT,'aaaaaa');
        let r = h.isWithinTimeRange(103,5);
        assert.equal(r, true);
        r = h.isWithinTimeRange(105,5);
        assert.equal(r, true);
        r = h.isWithinTimeRange(106,5);
        assert.equal(r, false);
        r = h.isWithinTimeRange(97,5);
        assert.equal(r, true);
        r = h.isWithinTimeRange(95,5);
        assert.equal(r, true);
        r = h.isWithinTimeRange(94,5);
        assert.equal(r, false);
    });


});