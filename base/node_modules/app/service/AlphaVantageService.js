import AjaxUtils from 'app/service/AjaxUtils'
import Service from 'app/service/Service'

export default class AlphaVantageService extends Service
{


    static BASE_URL  = 'https://www.alphavantage.co';
    // http://www.alphavantage.co/documentation/
    // alphavantage 7YX3630D3PBFSRWP
    // Expecting all the calls to be successful (if called once a minute)

    static info(symbol)
    {
        return new Promise((resolve)=>{
            AlphaVantageService._info_helper(symbol,(response)=>{
                resolve(response);
            })
        })

    }

    // Using callback for stub
    // https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=MSFT&interval=1min&apikey=7YX3630D3PBFSRWP
    static _info_helper(symbol,callback)
    {


        let key = '7YX3630D3PBFSRWP';
        let url = AlphaVantageService.BASE_URL + '/query?function=TIME_SERIES_INTRADAY&symbol='+symbol+'&interval=1min&apikey='+key;

        AjaxUtils.loadJson(url).then((response)=>{
            callback(response);
        })
    }
}